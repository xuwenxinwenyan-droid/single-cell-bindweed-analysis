# 单细胞RNA-seq分析运行说明

## 前置要求

### 1. 安装 Python 环境

推荐使用 Anaconda 或 Miniconda：

```bash
# 如果已安装 conda，创建新环境
conda create -n scRNA python=3.9
conda activate scRNA
```

### 2. 安装必需的包

```bash
pip install scanpy python-igraph leidenalg numpy pandas matplotlib seaborn
```

或者使用 conda：

```bash
conda install -c conda-forge scanpy python-igraph leidenalg
conda install numpy pandas matplotlib seaborn
```

## 运行分析

### 方法1：使用批处理脚本（最简单，Windows用户推荐）

1. **首次运行前，先安装依赖**：
   - 双击运行 `安装依赖.bat`
   - 等待所有包安装完成

2. **运行分析**：
   - 双击运行 `运行分析.bat`
   - 脚本会自动检查 Python 和依赖包
   - 分析完成后结果保存在 `./results/` 文件夹

### 方法2：使用 Python 脚本（命令行）

```bash
# 在项目根目录下运行
cd "e:\single cell-wenxin"

# 首次运行前安装依赖
pip install -r requirements.txt

# 运行分析
python run_analysis.py
```

### 方法3：使用 Jupyter Notebook

1. 启动 Jupyter Notebook：
   ```bash
   jupyter notebook
   ```

2. 打开 `matrix/scRNA_Analysis_Colab.ipynb`

3. 依次运行所有 cell

## 数据要求

确保数据文件结构如下：
```
single cell-wenxin/
├── matrix/
│   ├── control/
│   │   ├── barcodes.tsv.gz
│   │   ├── features.tsv.gz
│   │   └── matrix.mtx.gz
│   ├── 100PE/
│   │   ├── barcodes.tsv.gz
│   │   ├── features.tsv.gz
│   │   └── matrix.mtx.gz
│   ├── 500PE/
│   │   ├── barcodes.tsv.gz
│   │   ├── features.tsv.gz
│   │   └── matrix.mtx.gz
│   └── scRNA_Analysis_Colab.ipynb
└── run_analysis.py
```

## 输出结果

分析完成后，结果将保存在 `./results/` 文件夹中：

- **图表** (`./results/figures/`): 13张分析图表
- **表格** (`./results/tables/`): CSV格式的分析结果表格
- **处理后的数据** (`./results/processed_data.h5ad`): 完整的分析结果数据
- **摘要报告** (`./results/ANALYSIS_SUMMARY.txt`): 分析摘要

## 预计运行时间

- 完整分析流程：约 30-45 分钟
- 内存需求：约 8-10 GB

## 故障排除

### 如果遇到 "Python was not found" 错误：

1. 确认已安装 Python
2. 将 Python 添加到系统 PATH
3. 或使用完整路径运行 Python（如：`C:\Python39\python.exe run_analysis.py`）

### 如果遇到包导入错误：

```bash
pip install --upgrade scanpy python-igraph leidenalg
```

### 如果内存不足：

- 减少分析的细胞数量
- 关闭其他占用内存的程序
- 使用更高配置的计算机

## 联系支持

如有问题，请检查：
1. Python 版本（推荐 3.8-3.10）
2. 所有必需的包是否已安装
3. 数据文件是否完整

